{
    "swagger": "2.0",
    "info": {
        "description": "Web service that allows to run tests for programms written in almost any language.\nProject page: https://github.com/kee-reel/LATE",
        "title": "LATE API",
        "contact": {
            "name": "Kee Reel",
            "url": "https://kee-reel.com/about-ru",
            "email": "c4rb0n_unit@protonmail.com"
        },
        "version": "0.1"
    },
    "host": "localhost:12345",
    "basePath": "/",
    "paths": {
        "/languages": {
            "get": {
                "description": "Returns list of supported languages.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "languages"
                ],
                "summary": "Get supported languages",
                "operationId": "get-languages",
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APILangsResponse"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/login": {
            "get": {
                "description": "Returns token that could be used in other requests.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "login"
                ],
                "summary": "Get token for registered user",
                "operationId": "get-login",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User email address",
                        "name": "email",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "User password. Must be at least 6 symbols",
                        "name": "pass",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APITokenResponse"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 100, 101, 102, 200, 201, 202, 303",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/register": {
            "get": {
                "description": "Usually user makes this request when opening link sent on email.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "register"
                ],
                "summary": "Confirm new user registration",
                "operationId": "get-register",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Registration token, sent by POST /register",
                        "name": "token",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APINoError"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 300, 301, 302, 304",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            },
            "post": {
                "description": "On success user will receive confirmation link on specified email.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "register"
                ],
                "summary": "Register new user",
                "operationId": "post-register",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User email",
                        "name": "email",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "User password",
                        "name": "pass",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "User name",
                        "name": "name",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APINoError"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 100, 101, 103, 200, 201, 700, 701",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/restore": {
            "get": {
                "description": "Usually user makes this request when opening link sent on email.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "restore"
                ],
                "summary": "Confirm user password restore",
                "operationId": "get-restore",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Verification token, sent by POST /verify",
                        "name": "token",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APINoError"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 300, 301, 302, 304",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            },
            "post": {
                "description": "On success user will receive confirmation link on specified email.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "restore"
                ],
                "summary": "Restore user password",
                "operationId": "post-restore",
                "parameters": [
                    {
                        "type": "string",
                        "description": "User email",
                        "name": "email",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "New user password",
                        "name": "pass",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APINoError"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 100, 101, 102, 200, 201",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/solution": {
            "post": {
                "description": "Receives solution in form of file or plain text.\nBuilds solution and then runs. While running it gives various input parameters (through stdin) and expects specific result (from stdout).\nApart from errors raised due to invalid POST parameters, there are 2 \"normal\" errors:\n508 - Solution build error. If this happens, then result will contain: `{\"error\":508,\"error_data\":{\"msg\":\"multiline compilation error\"}}`\n509 - Solution test error. If this happens, then result will contain: `{\"error\":509,\"error_data\":{\"expected\":\"expected result\", \"params\":\"semicolon separated input parameters\", \"result\":\"actual result\"}}`\nIf \"verbose\" flag is \"true\" then result will contain (if no error occurs): `{\"result\":[{\"params\":\"semicolon separated input parameters\", \"result\":\"actual result\"}]}`",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "solution"
                ],
                "summary": "Send solution for specific task",
                "operationId": "post-solution",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Access token returned by GET /login",
                        "name": "token",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Language of passing solution",
                        "name": "lang",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "ID of task to pass with given solution",
                        "name": "task_id",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Source text of passing solution",
                        "name": "source_text",
                        "in": "formData"
                    },
                    {
                        "type": "file",
                        "description": "File with source text of passing solution",
                        "name": "source_file",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "description": "User test cases for solution",
                        "name": "test_cases",
                        "in": "formData"
                    },
                    {
                        "type": "boolean",
                        "description": "If specified - when solution is passed, all test results will be returned",
                        "name": "verbose",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APISolutionTestSuccess"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 300, 301, 302, 304, 4XX, 5XX, 6XX",
                        "schema": {
                            "$ref": "#/definitions/main.APISolutionTest"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/tasks/flat": {
            "get": {
                "description": "Returns complete data about existing tasks.\nResult will be formatted in flat structure with integer ID as a key. Example could be found in responses section.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "tasks"
                ],
                "summary": "Get tasks data in flat structure",
                "operationId": "get-tasks-flat",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Access token returned by GET /login",
                        "name": "token",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Comma separated task IDs: \\",
                        "name": "ids",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tasks data. additionalProp here stands for integer IDs",
                        "schema": {
                            "$ref": "#/definitions/main.APITasksDataFlat"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 300, 301, 302, 304, 401, 402",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/tasks/hierarhy": {
            "get": {
                "description": "Returns complete data about existing tasks.\nResult will be formatted in hierarchical structure with folder_name as a key. Example could be found in responses section.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "tasks"
                ],
                "summary": "Get tasks data in hierarhical structure",
                "operationId": "get-tasks-hierarhy",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Access token returned by GET /login",
                        "name": "token",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Comma separated folder names: \\",
                        "name": "folders",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tasks data. additionalProp here stands for integer IDs",
                        "schema": {
                            "$ref": "#/definitions/main.APITasksDataHierarchy"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 300, 301, 302, 304, 8XX",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        },
        "/template": {
            "get": {
                "description": "Template for solution for all supported languages",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "template"
                ],
                "summary": "Returns solution template for specified language",
                "operationId": "get-template",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Access token returned by GET /login",
                        "name": "token",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Language of template",
                        "name": "lang",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "schema": {
                            "$ref": "#/definitions/main.APITemplate"
                        }
                    },
                    "400": {
                        "description": "Possible error codes: 300, 301, 302, 304, 600, 601",
                        "schema": {
                            "$ref": "#/definitions/main.APIError"
                        }
                    },
                    "500": {
                        "description": "Server internal bug",
                        "schema": {
                            "$ref": "#/definitions/main.APIInternalError"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "main.APIError": {
            "description": "Error code from https://github.com/kee-reel/LATE/blob/main/web/errors.go",
            "type": "object",
            "properties": {
                "error": {
                    "type": "integer",
                    "example": 300
                }
            }
        },
        "main.APIInternalError": {
            "description": "Error code from https://github.com/kee-reel/LATE/blob/main/web/errors.go",
            "type": "object",
            "properties": {
                "error": {
                    "type": "integer",
                    "example": 1
                }
            }
        },
        "main.APILangsResponse": {
            "type": "object",
            "properties": {
                "langs": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "c",
                        "py",
                        "pas"
                    ]
                }
            }
        },
        "main.APINoError": {
            "description": "Empty success response",
            "type": "object"
        },
        "main.APIProjectFlat": {
            "type": "object",
            "properties": {
                "folder_name": {
                    "type": "string",
                    "example": "sample_project"
                },
                "name": {
                    "type": "string",
                    "example": "Sample project"
                }
            }
        },
        "main.APIProjectHierarchy": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "example": 666
                },
                "name": {
                    "type": "string",
                    "example": "Sample project"
                },
                "units": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.APIUnitHierarchy"
                    }
                }
            }
        },
        "main.APISolutionErrorData": {
            "type": "object",
            "properties": {
                "expected": {
                    "type": "string",
                    "example": "8"
                },
                "msg": {
                    "type": "string",
                    "example": "Build fail message"
                },
                "params": {
                    "type": "string",
                    "example": "2;1;7'"
                },
                "result": {
                    "type": "string",
                    "example": "1"
                },
                "stage": {
                    "type": "string",
                    "example": "test"
                }
            }
        },
        "main.APISolutionTest": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "integer",
                    "example": 508
                },
                "errorData": {
                    "$ref": "#/definitions/main.APISolutionErrorData"
                }
            }
        },
        "main.APISolutionTestSuccess": {
            "type": "object",
            "properties": {
                "result": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.APISolutionVerboseResult"
                    }
                }
            }
        },
        "main.APISolutionVerboseResult": {
            "type": "object",
            "properties": {
                "params": {
                    "type": "string",
                    "example": "2;1;7'"
                },
                "result": {
                    "type": "string",
                    "example": "8"
                }
            }
        },
        "main.APITaskFlat": {
            "type": "object",
            "properties": {
                "desc": {
                    "type": "string",
                    "example": "Sample description"
                },
                "folderName": {
                    "type": "string",
                    "example": "task-1"
                },
                "input": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.APITaskInput"
                    }
                },
                "isPassed": {
                    "type": "boolean",
                    "example": true
                },
                "name": {
                    "type": "string",
                    "example": "Sample task"
                },
                "number": {
                    "type": "integer",
                    "example": 0
                },
                "output": {
                    "type": "string",
                    "example": "Description of output format"
                },
                "unitId": {
                    "type": "integer",
                    "example": 1
                }
            }
        },
        "main.APITaskHierarchy": {
            "type": "object",
            "properties": {
                "desc": {
                    "type": "string",
                    "example": "Sample description"
                },
                "id": {
                    "type": "integer",
                    "example": 666
                },
                "input": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.APITaskInput"
                    }
                },
                "isPassed": {
                    "type": "boolean",
                    "example": true
                },
                "name": {
                    "type": "string",
                    "example": "Sample task"
                },
                "number": {
                    "type": "integer",
                    "example": 0
                },
                "output": {
                    "type": "string",
                    "example": "Description of output format"
                },
                "unitId": {
                    "type": "integer",
                    "example": 1
                }
            }
        },
        "main.APITaskInput": {
            "type": "object",
            "properties": {
                "dimensions": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    },
                    "example": [
                        5,
                        4
                    ]
                },
                "name": {
                    "type": "string",
                    "example": "task-1"
                },
                "range": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "example": [
                        "-1000",
                        "1000"
                    ]
                },
                "type": {
                    "type": "string",
                    "example": "int"
                }
            }
        },
        "main.APITasksDataFlat": {
            "type": "object",
            "properties": {
                "projects": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/main.APIProjectFlat"
                    }
                },
                "tasks": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/main.APITaskFlat"
                    }
                },
                "units": {
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/main.APIUnitFlat"
                    }
                }
            }
        },
        "main.APITasksDataHierarchy": {
            "type": "object",
            "additionalProperties": {
                "$ref": "#/definitions/main.APIProjectHierarchy"
            }
        },
        "main.APITemplate": {
            "type": "object",
            "properties": {
                "template": {
                    "type": "string",
                    "example": "#include \u003cstdio.h\u003e\nint main() {\n\t\n}"
                }
            }
        },
        "main.APITokenResponse": {
            "type": "object",
            "properties": {
                "token": {
                    "type": "string",
                    "example": "9rzNUDp8bP6VOnGIqOO011f5EB4jk0eN0osZt0KFZHTtWIpiwqzVj2vof5sOq80QIJbne5dHiH5vEUe7uJ42X5X39tHGpt0LTreFOjMkfdn4sB6gzouUHc4tGubhikoKuK05P06W1x0QK0zJzbPaZYG4mfBpfU1u8xbqSPVo8ZI9zumiJUiHC8MbJxMPYsGJjZMChQBtA0NvKuAReS3v1704QBX5zZCAyyNP47VZ51E9MMqVGoZBxFmJ4mCHRBy7"
                }
            }
        },
        "main.APIUnitFlat": {
            "type": "object",
            "properties": {
                "folder_name": {
                    "type": "string",
                    "example": "unit-1"
                },
                "name": {
                    "type": "string",
                    "example": "Sample unit"
                }
            }
        },
        "main.APIUnitHierarchy": {
            "type": "object",
            "properties": {
                "folder_name": {
                    "type": "string",
                    "example": "unit-1"
                },
                "id": {
                    "type": "integer",
                    "example": 666
                },
                "tasks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.APITaskHierarchy"
                    }
                }
            }
        }
    }
}